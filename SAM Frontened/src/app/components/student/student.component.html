<div class="student-container">
  <h2>All Students</h2>

  <!-- Error message -->
  <div *ngIf="error" class="error">{{ error }}</div>

  <!-- Edit button above table in top-right corner -->
  <div class="edit-student-btn-container">
    <select [(ngModel)]="selectedStudent" class="student-select">
      <option *ngFor="let s of students" [ngValue]="s">{{ s.studentName }}</option>
    </select>
    <button 
      class="edit-btn" 
      [disabled]="!selectedStudent"
      (click)="openEditModal(selectedStudent!)">
      Edit Student
    </button>
  </div>

  <!-- Students table -->
  <table *ngIf="students.length > 0" class="student-table">
    <thead>
      <tr>
        <th>Roll No</th>
        <th>Name</th>
        <th>Class</th>
        <th>Division</th>
        <th>Phone</th>
        <th>Email</th>
        <th>Address</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let student of students">
        <td>{{ student.rollno }}</td>
        <td>{{ student.studentName }}</td>
        <td>{{ student.class }}</td>
        <td>{{ student.div }}</td>
        <td>{{ student.phoneNo }}</td>
        <td>{{ student.emailAddress }}</td>
        <td>{{ student.address }}</td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="students.length === 0 && !error" class="no-data">
    No students found.
  </div>
</div>

<!-- Edit Student Modal -->
<div class="modal" [class.show]="isEditModalOpen">
  <div class="modal-content">
    <span class="close" (click)="closeEditModal()">&times;</span>
    <h3>Edit Student</h3>

    <form *ngIf="selectedStudent" #editForm="ngForm" (ngSubmit)="updateStudent()">
      <label>Student Name</label>
      <input type="text" [(ngModel)]="selectedStudent.studentName" name="studentName" required>

      <label>Roll No</label>
      <input type="number" [(ngModel)]="selectedStudent.rollno" name="rollno" required>

      <label>Class</label>
      <input type="text" [(ngModel)]="selectedStudent.class" name="class" required>

      <label>Division</label>
      <input type="text" [(ngModel)]="selectedStudent.div" name="div" required>

      <label>Phone</label>
      <input type="text" [(ngModel)]="selectedStudent.phoneNo" name="phoneNo" required>

      <label>Email</label>
      <input type="email" [(ngModel)]="selectedStudent.emailAddress" name="emailAddress" required>

      <label>Address</label>
      <input type="text" [(ngModel)]="selectedStudent.address" name="address" required>

      <button type="submit" class="save-btn">Save Changes</button>
    </form>
  </div>
</div>
